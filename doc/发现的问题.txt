
2014年8月28日

1、需要考虑清楚出入库的业务规则：例如，在进行入库修改时，如果试剂A已经出库，则不能再随意修改入库信息。也就是说入库和出库时需要判断库存表中是否有足够的数量进行出入库操作。

OK 2、b_cat表中新增加一个相同catno时报错，界面中增加时也报错，库中是有什么约束吗？ 取消了唯一索引

3、d_catcode表中的machineNo没有用，因为试剂维护时最多知道是哪类设备，不用知道是为具体哪个设备。（即不知道编号）

4、入库操作的业务规则和界面问题：
   A、入库的试剂/耗材必需要提前维护，如果没有需要提前维护。增加和修改时需要进行校验
   B、入库维护页面，需要增加编号字段。只要填写试剂耗材名称，货号和编号后就可以自动匹配出来，其中货号和编号只能自动匹配，不能修改。
   C、入库维护页面，批号、有效期、单价、数量是必填项，入库时间不能晚于当天。
   D、入库修改时，如果试剂A已经出库，则不能再随意修改和删除入库信息。也就是说入库和出库时需要判断库存表中是否有足够的数量进行出入库的修改操作，需要进行业务校验。
   E、入库列表显示字段：入库时间、类型、货号、名称、编号、批号、数量、单价、所属R、入库原因、生产商、来源、备注。
   F、入库列表页面需要增加查询条件：入库时间段、试剂耗材名称、货号、批号、入库原因、生产商、供应商。默认显示最近3天的入库情况。超过3天（b_var表中配置，不能随意后悔，或者是最大不能超过最近一次的R统计时间）的入库情况本人不能再进行维护

5、出库的业务规则和界面问题：
   A、出库维护页面在discard和validation出库时备注字段必须要填写，目的是为了统计时能实现Root Causes和Validation description
   B、出库列表页面的库存查询条件改为：类型、名称、货号、批号。
   C、出库列表显示字段：类型、货号、名称、批号、数量、有效期、生产商
   D、出库列表页面需要将快要过期（根据配置）的试剂耗材用红色进行提示，并显示在最前面。
   E、出库维护也同步增加生产商字段。
   F、出库维护页面中的设备名称可以通过选择后自动匹配设备序号。
   G、出库信息列表页面需要增加查询条件： 出库时间段、试剂耗材名称、货号、批号、出库原因、生产商。默认显示最近3天的出库情况。超过3天（b_var表中配置，不能随意后悔，或者是最大不能超过最近一次的R统计时间）的出库情况本人不能再进行维护。出库