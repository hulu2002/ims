SELECT * FROM ( SELECT  b1.id, b1.catno, b1.catname,sum(DISTINCT b1.total) alltotal,b1.expiredate as builtdate,b_var.bizValue,CONCAT(b1.catname,'的库存还剩',b1.total,'个！') description FROM b_cat b1 , b_cat b2,b_var where b1.catname=b2.catname and b_var.bizkey='stockthreshold' GROUP BY b1.catname ) K WHERE alltotal>=0 and alltotal<=bizValue ORDER BY alltotal asc