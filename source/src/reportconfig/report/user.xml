<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">
	<page id="user" js="/webresources/script/validate.js,/webresources/script/demo.js">
		<header>
			<![CDATA[<p align="center"><font size="6"><b>用户基础信息管理</b></font></p>]]>
		</header>
		<report id="userlist" parenttitle="用户基础信息管理" type="editablelist" cellresize="1" rowselect="multiple-checkbox" pagesize="13" interceptor="com.ims.interceptor.DeleteUser">
				
			  <!--interceptor>
				<beforedisplay-perrow>
					if(rowDataBean.getRowindex()==-1) return ;//标题行
					if(rowDataBean.getRowindex()%2==1)
					{
						String style=rowDataBean.getRowstyleproperty();
						if(style==null) style="";
						style+=" style='background:#CFDFF8'";
						rowDataBean.setRowstyleproperty(style);
					}
				</beforedisplay-perrow>

			</interceptor-->
				<display mouseoverbgcolor="CCCCCC" >
				<col column="{col-rowselect}" width="20"></col>
					<col column="{sequence:1}" label="序号" width="3%"/>
					<col column="id" label="编号"  displaytype="hidden"/>
					<col column="userid" label="工号"  clickorderby="true" width="5%"/>
					<col column="name" label="用户名称" clickorderby="true" width="20%"></col>
					<col column="nickname" label="昵称" clickorderby="true" width="20%"></col>
					<col column="role" label="角色" clickorderby="true" width="10%"></col>
					<col column="sex" label="性别" clickorderby="true" width="10%"></col>
					<col column="remark" label="备注" clickorderby="true" width="20%"></col>
				</display>
				<sql>
				
					<select>
						<value>
							<![CDATA[SELECT id,userid,name,nickname,(select codename from d_code where codetype='role' and code = a.role ) role,(select codename from d_code where codetype='sex' and  code = a.sex ) sex,remark FROM d_user a  order by a.name]]>
						</value>
					</select>	
					<insert pageurl="report{user_edit.report1}" popupparams="{title:'新增用户',width:400,height:300}"></insert>
					<update pageurl="report{user_edit.report1}" urlparams="txtid=@{id}"
						popupparams="{title:'编辑用户',width:400,height:300}"></update>  
					<delete confirmessage="是否删除[@{name}]对应的记录？">
						delete from t_user where id=@{id__old};
					  </delete>							
				</sql>
				<buttons>
					<button name="button1" position="title" label="重置密码" extends="${wabacus.button2.default}">
						<!-- invokeServerActionForComponent('yhglpage','yhgl','com.wabacusdemo.TestServerCallBack1',{name:'SELECTEDROW',value:true},true,testInvokeCallbackMethod1) -->
						
					</button>
			        <!--  <button extends="${wabacus.button2.default}" name="button1" class="com.wabacus.system.buttons.ServerSQLActionButton" position="title" label="重置密码" successprompt="重置成功" failedprompt="重置失败"  confirmessage="是否重置该用户的密码？" positionorder="3"> 
					<value>
					<![CDATA[
						update yxgluser(password = 'ecf6e9a713c8533bbad5393ec4a9dab4') where id=@{id__old};
					]]>
					</value>
					</button-->
			    </buttons>

			</report>
	</page>
</applications>