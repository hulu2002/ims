<?xml version="1.0" encoding="UTF-8"?>
<applications xmlns="http://www.wabacus.com"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.wabacus.com ../xsd/wabacus.applications.xsd">
	<page id="out" js="/webresources/script/validate.js">
		<report id="report1" title="request{txtname}详细信息" rowselect="multiple-checkbox" type="editablelist" >
				<display mouseoverbgcolor="CCCCCC" >
				<col column="{col-rowselect}" width="20"></col>
					<col column="id" label="编号"  displaytype="hidden"/>
					<col column="{sequence:1}" label="序号" width="3%"/>
					<col column="machinename" label="机器"  clickorderby="true" width="5%"/>
					<col column="machineno" label="机器编号"  clickorderby="true" width="5%"/>
					<col column="batchno" label="批次" clickorderby="true" width="20%"></col>
					<col column="username" label="出库人" clickorderby="true" width="20%"></col>
					<col column="useDate" label="出库日期" clickorderby="true" width="10%"></col>
					<col column="num" label="数量" clickorderby="true" width="10%"></col>
					<col column="reason" label="原因" clickorderby="true" width="20%"></col>
				</display>
			<sql>
				<select>
					<value>
						<![CDATA[SELECT machinename,machineno,batchno,username,useDate,num,reason FROM b_catuse  where  {#condition#}]]>
					</value>
					<condition name="txtid" hidden="true">
						<value>
						<![CDATA[(ID = '#data#' )]]>
						</value>
					</condition>
				</select>
				<insert pageurl="report{out_edit.report1}" popupparams="{title:'出库',width:400,height:300}"></insert>
				<update pageurl="report{out_edit.report1}" urlparams="txtid=@{id}"
						popupparams="{title:'编辑用户',width:400,height:300}"></update>  
				<delete confirmessage="是否删除[@{batchno}]对应的记录？">
						delete from b_catuse where id=@{id__old};
					  </delete>		
			</sql>
			<format><!--
				<value>
					rrequest.getRequest().setAttribute("txtname",name);//存放request，以便显示标题时能取到
				</value>
			--></format>
		</report>
	</page>
	
</applications>